<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>

<StackPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.kamoteracer.controller.GameController" fx:id="root" prefWidth="550" prefHeight="440">
    <children>
        <!-- Scrolling background -->
        <Pane fx:id="backgroundLayer" prefWidth="550" prefHeight="440">
            <children>
                <ImageView fx:id="bg1" fitWidth="550" fitHeight="440" preserveRatio="false">
                    <image>
                        <Image url="@/images/game_background.png"/>
                    </image>
                </ImageView>
                <ImageView fx:id="bg2" layoutY="-440" fitWidth="550" fitHeight="440" preserveRatio="false">
                    <image>
                        <Image url="@/images/game_background.png"/>
                    </image>
                </ImageView>
            </children>
        </Pane>
        <!-- Gameplay layer -->
        <Pane fx:id="gameLayer" pickOnBounds="false" prefWidth="550" prefHeight="440" />
        <!-- UI layer -->
        <Pane fx:id="uiLayer" pickOnBounds="false" prefWidth="550" prefHeight="440">
            <children>
                <ImageView fx:id="scoreCard" layoutX="370" layoutY="16" fitWidth="120" preserveRatio="true">
                    <image>
                        <Image url="@/images/score_card.png"/>
                    </image>
                </ImageView>
                <Label fx:id="scoreLabel" layoutX="430" layoutY="15" textFill="#ffffff" style="-fx-font-weight: bold; -fx-font-size: 16px;" text="0"/>
            </children>
        </Pane>

        <!-- Game Over modal overlay -->
        <Pane fx:id="gameOverOverlay" visible="false" prefWidth="550" prefHeight="440" style="-fx-background-color: rgba(0,0,0,0.55);">
            <children>
                <!-- Scaled + centered container (controller sets scale and position) -->
                <Pane fx:id="gameOverContent" layoutX="65" layoutY="40" prefWidth="420" prefHeight="340">
                    <children>
                        <!-- Dialog box centered container -->
                        <Pane fx:id="dialogPane" layoutX="20" layoutY="40" prefWidth="380" prefHeight="260" style="-fx-background-color: #d9d9d9; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.4), 8, 0.3, 0, 3);">
                            <children>
                                <!-- Title inside dialog -->
                                <ImageView layoutX="30" layoutY="-20" fitWidth="320" preserveRatio="true">
                                    <image>
                                        <Image url="@/images/Game over.png"/>
                                    </image>
                                </ImageView>

                                <!-- Car inside dialog -->
                                <ImageView layoutX="20" layoutY="30" fitWidth="340" preserveRatio="true">
                                    <image>
                                        <Image url="@/images/game over car.png"/>
                                    </image>
                                </ImageView>

                                <!-- Highscore banner -->
                                <ImageView layoutX="60" layoutY="130" fitWidth="260" preserveRatio="true">
                                    <image>
                                        <Image url="@/images/game over highscore.png"/>
                                    </image>
                                </ImageView>

                                <!-- Optional numeric score on banner (hidden) -->
                                <Label fx:id="gameOverScoreLabel" layoutX="190" layoutY="134" visible="false" text="0"
                                       style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: white;"/>

                                <!-- Buttons as images -->
                                <ImageView fx:id="tryAgainImage" layoutX="30" layoutY="190" fitWidth="150" preserveRatio="true" pickOnBounds="true">
                                    <image>
                                        <Image url="@/images/game over try again.png"/>
                                    </image>
                                </ImageView>
                                <ImageView fx:id="saveScoreImage" layoutX="200" layoutY="190" fitWidth="150" preserveRatio="true" pickOnBounds="true">
                                    <image>
                                        <Image url="@/images/game over Save highscore.png"/>
                                    </image>
                                </ImageView>
                            </children>
                        </Pane>
                    </children>
                </Pane>
            </children>
        </Pane>
        
    </children>
</StackPane>
